---
layout: default
title: Finder
---

<div class="max-w-7xl mx-auto px-6 py-10 space-y-12">

    <div class="text-center space-y-4">
        <h1 class="text-4xl md:text-6xl font-extrabold text-white tracking-tight">
            Arch <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500">Environment</span> Finder
        </h1>
        <p class="text-lg text-gray-400 max-w-2xl mx-auto">
            Válassz szűrőket a neked való felület megtalálásához.
        </p>
    </div>

    <div class="grid gap-6 md:grid-cols-3">
        <div class="bg-darkbg-800 border border-darkbg-700 rounded-2xl p-5 shadow-lg relative overflow-hidden">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-fuchsia-500"></span> RAM (MB)
            </h3>
            <div class="h-40 w-full"><canvas id="chartRam"></canvas></div>
        </div>
        <div class="bg-darkbg-800 border border-darkbg-700 rounded-2xl p-5 shadow-lg relative overflow-hidden">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-cyan-500"></span> CPU Index
            </h3>
            <div class="h-40 w-full"><canvas id="chartCpu"></canvas></div>
        </div>
        <div class="bg-darkbg-800 border border-darkbg-700 rounded-2xl p-5 shadow-lg relative overflow-hidden">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-lime-500"></span> Méret (MB)
            </h3>
            <div class="h-40 w-full"><canvas id="chartDisk"></canvas></div>
        </div>
    </div>

    <div class="flex flex-col items-center gap-4 sticky top-16 z-30 py-4 bg-darkbg-900/95 backdrop-blur-xl border-b border-white/5 w-full">
        <div class="flex flex-wrap justify-center gap-2">
            {% for filter in site.data.environments.feature_filters %}
            <button 
                onclick="toggleFilter('{{ filter.id }}')" 
                id="filter-btn-{{ filter.id }}"
                class="filter-btn px-4 py-1.5 rounded-full text-xs font-bold border border-darkbg-700 bg-darkbg-800 text-gray-400 transition-all duration-300 hover:border-gray-500 hover:text-white"
                data-filter-id="{{ filter.id }}">
                {{ filter.name }}
            </button>
            {% endfor %}
            <button onclick="clearAllFilters()" id="reset-btn" class="hidden px-4 py-1.5 rounded-full text-xs font-bold border border-red-900/50 bg-red-900/10 text-red-400 hover:bg-red-900/30">
                ✕ Reset
            </button>
        </div>
    </div>

    <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for item in site.data.environments.items %}
        <div class="env-card group flex flex-col bg-darkbg-800 rounded-2xl overflow-hidden border border-darkbg-700 hover:border-opacity-50 transition-all duration-500 hover:-translate-y-1 hover:shadow-2xl"
             style="--theme-color: {{ item.color }}"
             data-id="{{ item.id }}"
             data-tags="{{ item.tags | join: ',' }}">
            
            <div class="relative h-48 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-t from-darkbg-800 via-transparent to-transparent z-10"></div>
                <img src="{{ item.image }}" alt="{{ item.name }}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700">
                
                <div class="absolute top-3 right-3 z-20 flex gap-1">
                    {% for tag in item.tags limit:2 %}
                    <span class="px-2 py-1 rounded bg-black/60 text-[10px] font-bold text-white backdrop-blur-md border border-white/10 uppercase tracking-wide">
                        {{ tag }}
                    </span>
                    {% endfor %}
                </div>
            </div>

            <div class="p-6 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-2">
                    <h2 class="text-2xl font-bold text-white group-hover:text-[var(--theme-color)] transition-colors">
                        {{ item.name }}
                    </h2>
                </div>
                
                <p class="text-gray-400 text-sm mb-6 leading-relaxed flex-grow">
                    {{ item.description }}
                </p>

                <div class="grid grid-cols-2 gap-4 mb-6 text-xs border-t border-b border-darkbg-700 py-3">
                    <div>
                        <span class="text-gray-500 block">Ablakkezelő</span>
                        <span class="text-gray-200 font-medium">{{ item.specs.wm }}</span>
                    </div>
                    <div>
                        <span class="text-gray-500 block">Toolkit</span>
                        <span class="text-gray-200 font-medium">{{ item.specs.toolkit }}</span>
                    </div>
                </div>

                <div class="flex gap-3 mt-auto">
                    <a href="{{ item.website }}" target="_blank" class="flex-1 text-center px-4 py-2 rounded-lg text-sm font-bold border border-darkbg-700 text-gray-300 hover:bg-darkbg-700 hover:text-white transition-all">
                        Weboldal
                    </a>
                    <a href="{{ item.download }}" target="_blank" class="flex-1 text-center px-4 py-2 rounded-lg text-sm font-bold text-black transition-all shadow-lg hover:shadow-[var(--theme-color)]/50" 
                       style="background-color: var(--theme-color);">
                        Letöltés
                    </a>
                </div>
            </div>
            
            <div class="h-1 w-full" style="background-color: var(--theme-color);"></div>
        </div>
        {% endfor %}
    </div>

    <div id="no-results" class="hidden py-20 text-center">
        <p class="text-xl text-gray-500">Nincs találat a kiválasztott szűrőkre.</p>
        <button onclick="clearAllFilters()" class="mt-4 text-cyan-400 hover:underline">Szűrők törlése</button>
    </div>

</div>

<script>
    // --- 1. ADATOK BETÖLTÉSE ---
    const envData = [
        {% for item in site.data.environments.items %}
        {
            id: "{{ item.id }}",
            name: "{{ item.name }}",
            color: "{{ item.color }}",
            ram: {{ item.metrics.ram }},
            cpu: {{ item.metrics.cpu }},
            disk: {{ item.metrics.disk }}
        },
        {% endfor %}
    ];

    // --- 2. CHART.JS CONFIG ---
    Chart.defaults.font.family = 'Inter';
    Chart.defaults.color = '#64748b';
    let chartRam, chartCpu, chartDisk;

    function initCharts() {
        const commonOptions = {
            responsive: true, maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { y: { display: false }, x: { display: false } },
            animation: { duration: 600 }
        };

        const createChart = (id) => new Chart(document.getElementById(id), {
            type: 'bar',
            data: { 
                labels: [], 
                datasets: [{ data: [], backgroundColor: [], borderRadius: 4 }] 
            }, 
            options: commonOptions
        });

        chartRam = createChart('chartRam');
        chartCpu = createChart('chartCpu');
        chartDisk = createChart('chartDisk');
    }

    // --- 3. SZŰRÉS LOGIKA (KÁRTYÁKRA) ---
    // "Neon" stílus a gombokhoz
    const activeBtnClass = ['bg-cyan-500', 'text-black', 'border-cyan-400', 'shadow-[0_0_10px_rgba(6,182,212,0.4)]'];
    const inactiveBtnClass = ['bg-darkbg-800', 'text-gray-400', 'border-darkbg-700'];

    let selectedFilters = new Set(); 

    document.addEventListener("DOMContentLoaded", () => {
        initCharts();
        updateView();
    });

    function toggleFilter(filterId) {
        const btn = document.getElementById(`filter-btn-${filterId}`);
        if (selectedFilters.has(filterId)) {
            selectedFilters.delete(filterId);
            btn.classList.remove(...activeBtnClass);
            btn.classList.add(...inactiveBtnClass);
        } else {
            selectedFilters.add(filterId);
            btn.classList.remove(...inactiveBtnClass);
            btn.classList.add(...activeBtnClass);
        }
        updateView();
    }

    function clearAllFilters() {
        selectedFilters.clear();
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove(...activeBtnClass);
            btn.classList.add(...inactiveBtnClass);
        });
        updateView();
    }

    function updateView() {
        // Reset gomb
        const resetBtn = document.getElementById('reset-btn');
        resetBtn.style.display = selectedFilters.size > 0 ? 'block' : 'none';

        // Kártyák szűrése
        const cards = document.querySelectorAll('.env-card');
        let visibleIds = [];

        cards.forEach(card => {
            const tags = card.getAttribute('data-tags').split(',');
            // AND logika: Csak akkor jelenik meg, ha MINDEN szűrőnek megfelel
            const matches = selectedFilters.size === 0 || Array.from(selectedFilters).every(f => tags.includes(f));
            
            if (matches) {
                card.style.display = 'flex'; // Flex, mert a kártya layout flexbox
                visibleIds.push(card.getAttribute('data-id'));
            } else {
                card.style.display = 'none';
            }
        });

        // Diagramok frissítése a látható kártyák alapján
        const filteredData = envData.filter(item => visibleIds.includes(item.id));
        const labels = filteredData.map(d => d.name);
        const colors = filteredData.map(d => d.color);

        updateChart(chartRam, labels, filteredData.map(d => d.ram), colors);
        updateChart(chartCpu, labels, filteredData.map(d => d.cpu), colors);
        updateChart(chartDisk, labels, filteredData.map(d => d.disk), colors);

        // Empty state
        const noResults = document.getElementById('no-results');
        noResults.style.display = visibleIds.length === 0 ? 'block' : 'none';
    }

    function updateChart(chart, labels, data, colors) {
        chart.data.labels = labels;
        chart.data.datasets[0].data = data;
        chart.data.datasets[0].backgroundColor = colors;
        chart.update();
    }
</script>
