---
layout: default
title: Asztali K√∂rnyezetek
---

<div class="text-center mb-10">
    <h2 class="text-4xl sm:text-5xl font-extrabold text-white mb-6 tracking-tight">
        Tal√°ld meg a <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500">t√∂k√©letes</span> k√∂rnyezetet.
    </h2>
    
    <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-cyan-950/30 border border-cyan-800/50 text-cyan-400 text-sm font-medium backdrop-blur-sm mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Minden adat Arch Linux alaprendszeren m√©rve
    </div>
</div>

<div class="max-w-7xl mx-auto mb-6">
    <p class="text-gray-400 text-sm uppercase tracking-widest font-bold mb-3 text-center">Mit keresel?</p>
    <div class="flex flex-wrap justify-center gap-2">
        {% for filter in site.data.environments.feature_filters %}
        <button 
            onclick="toggleColFilter('{{ filter.id }}')" 
            id="col-btn-{{ filter.id }}"
            class="col-filter-btn px-4 py-1.5 rounded-lg text-xs font-bold border border-darkbg-700 bg-darkbg-800 text-gray-400 hover:text-white hover:border-gray-500 transition-all uppercase tracking-wide"
            data-filter-id="{{ filter.id }}">
            {{ filter.name }}
        </button>
        {% endfor %}
        
        <button onclick="clearAllFilters()" id="reset-btn" class="hidden px-4 py-1.5 rounded-lg text-xs font-bold border border-red-900/50 bg-red-900/20 text-red-400 hover:bg-red-900/40 transition-all uppercase tracking-wide">
            Reset ‚úï
        </button>
    </div>
</div>

<div class="max-w-6xl mx-auto mb-10 flex flex-wrap justify-center gap-3 border-t border-darkbg-700/50 pt-6">
    {% for cat in site.data.environments.categories %}
    <button 
        onclick="toggleRowFilter('{{ cat.id }}')" 
        id="row-btn-{{ cat.id }}"
        class="row-filter-btn px-5 py-2 rounded-full text-sm font-semibold border transition-all duration-300 bg-transparent text-gray-500 border-transparent hover:text-gray-300"
        data-category="{{ cat.id }}">
        {{ cat.name }}
    </button>
    {% endfor %}
</div>

<div class="bg-darkbg-800 rounded-2xl shadow-2xl border border-darkbg-700 overflow-hidden transition-all duration-500 relative backdrop-blur-sm bg-opacity-90 max-w-[95%] mx-auto">
    <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse" id="main-table">
            <thead>
                <tr class="bg-darkbg-900/50 border-b border-darkbg-700 text-xs uppercase tracking-wider text-gray-400 font-bold">
                    {% for header in site.data.environments.headers %}
                        <th class="p-5 min-w-[160px] whitespace-nowrap 
                            col-cell col-{{ header.key }}
                            {% if header.key == 'feature' %}sticky left-0 bg-darkbg-900 z-20 border-r border-darkbg-700 shadow-[2px_0_5px_rgba(0,0,0,0.2)]{% endif %}"
                            data-key="{{ header.key }}"
                            data-tags="{{ header.tags | join: ',' }}">
                            
                            {{ header.name }}
                            
                            {% if header.tags %}
                            <div class="flex flex-wrap gap-1 mt-2 opacity-50 font-normal normal-case">
                                {% for tag in header.tags limit:2 %}
                                <span class="text-[9px] px-1 rounded border border-gray-700">{{ tag }}</span>
                                {% endfor %}
                                {% if header.tags.size > 2 %}<span class="text-[9px]">+</span>{% endif %}
                            </div>
                            {% endif %}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="divide-y divide-darkbg-700/50">
                {% for row in site.data.environments.rows %}
                <tr class="table-row-item hover:bg-darkbg-700/40 transition-colors group" data-category="{{ row.category }}">
                    
                    {% for header in site.data.environments.headers %}
                        {% if header.key == 'feature' %}
                            <td class="p-5 font-semibold text-gray-200 sticky left-0 bg-darkbg-800 group-hover:bg-darkbg-800/90 border-r border-darkbg-700 shadow-[2px_0_5px_rgba(0,0,0,0.2)] z-10">
                                {{ row.feature }}
                                <span class="category-indicator inline-block w-1.5 h-1.5 rounded-full ml-2 mb-0.5" data-cat-id="{{ row.category }}"></span>
                            </td>
                        {% else %}
                            <td class="p-5 text-gray-400 col-cell col-{{ header.key }}">
                                {{ row[header.key] }}
                            </td>
                        {% endif %}
                    {% endfor %}

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div id="no-results" class="hidden p-12 text-center text-gray-500">
        <p class="text-xl font-semibold mb-2">Nincs ilyen kombin√°ci√≥ üòï</p>
        <p>Pr√≥b√°lj meg kevesebb sz≈±r≈ët haszn√°lni.</p>
    </div>
</div>

<script>
    // --- KONFIGUR√ÅCI√ì ---
    // Sor sz≈±r≈ë sz√≠nek (Categories)
    const rowColorMap = {
        'performance': { active: ['text-lime-400', 'bg-lime-900/20', 'border-lime-500/50'], inactive: ['text-gray-500', 'border-transparent'] },
        'ux': { active: ['text-cyan-400', 'bg-cyan-900/20', 'border-cyan-500/50'], inactive: ['text-gray-500', 'border-transparent'] },
        'tech': { active: ['text-fuchsia-400', 'bg-fuchsia-900/20', 'border-fuchsia-500/50'], inactive: ['text-gray-500', 'border-transparent'] }
    };
    
    // Oszlop sz≈±r≈ë sz√≠nek (Features) - Egys√©ges "Neon K√©k" st√≠lus aktiv√°l√°skor
    const activeColBtnClasses = ['bg-cyan-500', 'text-black', 'border-cyan-400', 'shadow-[0_0_10px_rgba(6,182,212,0.5)]'];
    const inactiveColBtnClasses = ['bg-darkbg-800', 'text-gray-400', 'border-darkbg-700'];

    // --- √ÅLLAPOT ---
    let selectedRowCategories = new Set();
    let selectedColFilters = new Set(); // Pl. 'wayland', 'tiling'

    // --- INIT ---
    document.addEventListener("DOMContentLoaded", () => {
        // P√∂tty√∂k sz√≠nez√©se
        document.querySelectorAll('.category-indicator').forEach(indicator => {
            const catId = indicator.getAttribute('data-cat-id');
            const colorClass = catId === 'performance' ? 'bg-lime-500' : (catId === 'ux' ? 'bg-cyan-500' : 'bg-fuchsia-500');
            indicator.classList.add(colorClass);
        });
    });

    // --- OSZLOP SZ≈∞R√âS (DE / WM FILTER) ---
    function toggleColFilter(filterId) {
        const btn = document.getElementById(`col-btn-${filterId}`);
        
        if (selectedColFilters.has(filterId)) {
            selectedColFilters.delete(filterId);
            btn.classList.remove(...activeColBtnClasses);
            btn.classList.add(...inactiveColBtnClasses);
        } else {
            selectedColFilters.add(filterId);
            btn.classList.remove(...inactiveColBtnClasses);
            btn.classList.add(...activeColBtnClasses);
        }
        
        updateView();
    }

    // --- SOR SZ≈∞R√âS (CATEGORY FILTER) ---
    function toggleRowFilter(catId) {
        const btn = document.getElementById(`row-btn-${catId}`);
        const styles = rowColorMap[catId];

        if (selectedRowCategories.has(catId)) {
            selectedRowCategories.delete(catId);
            btn.classList.remove(...styles.active);
            btn.classList.add(...styles.inactive);
        } else {
            selectedRowCategories.add(catId);
            btn.classList.remove(...styles.inactive);
            btn.classList.add(...styles.active);
        }
        updateView();
    }

    function clearAllFilters() {
        selectedColFilters.clear();
        selectedRowCategories.clear();
        
        // UI Reset
        document.querySelectorAll('.col-filter-btn').forEach(btn => {
            btn.classList.remove(...activeColBtnClasses);
            btn.classList.add(...inactiveColBtnClasses);
        });
        document.querySelectorAll('.row-filter-btn').forEach(btn => {
            // Itt egyszer≈±bb tr√ºkk√∂t haszn√°lunk a resetre
            btn.className = "row-filter-btn px-5 py-2 rounded-full text-sm font-semibold border transition-all duration-300 bg-transparent text-gray-500 border-transparent hover:text-gray-300";
        });

        updateView();
    }

    // --- LOGIKA ---
    function updateView() {
        // 1. Reset gomb kezel√©se
        const resetBtn = document.getElementById('reset-btn');
        if (selectedColFilters.size > 0 || selectedRowCategories.size > 0) {
            resetBtn.classList.remove('hidden');
        } else {
            resetBtn.classList.add('hidden');
        }

        // 2. OSZLOP SZ≈∞R√âS LOGIKA
        // Megkeress√ºk az √∂sszes fejl√©cet, ami nem a 'feature' oszlop
        const headers = document.querySelectorAll('th.col-cell:not(.sticky)');
        
        headers.forEach(th => {
            const key = th.getAttribute('data-key');
            const tags = th.getAttribute('data-tags').split(','); // Pl. ['wayland', 'gtk']
            
            // Ellen≈ërizz√ºk, hogy a DE rendelkezik-e AZ √ñSSZES kiv√°lasztott sz≈±r≈ëvel
            // (AND logika: ha Wayland √âS Tiling van kijel√∂lve, csak a Hyprland marad)
            const matchesAllFilters = Array.from(selectedColFilters).every(filter => tags.includes(filter));
            
            // Megkeress√ºk az √∂sszes cell√°t, ami ehhez az oszlophoz tartozik
            const cells = document.querySelectorAll(`.col-${key}`);
            
            if (matchesAllFilters) {
                // Megjelen√≠t√©s
                th.style.display = '';
                cells.forEach(cell => cell.style.display = '');
            } else {
                // Elrejt√©s
                th.style.display = 'none';
                cells.forEach(cell => cell.style.display = 'none');
            }
        });

        // 3. SOR SZ≈∞R√âS LOGIKA
        const rows = document.querySelectorAll('.table-row-item');
        let visibleRows = 0;

        rows.forEach(row => {
            const rowCat = row.getAttribute('data-category');
            if (selectedRowCategories.size === 0 || selectedRowCategories.has(rowCat)) {
                row.style.display = '';
                visibleRows++;
            } else {
                row.style.display = 'none';
            }
        });

        // 4. √úRES √ÅLLAPOT
        // Itt egy tr√ºkk: ha minden oszlopot elrejtett√ºnk (kiv√©ve az els≈ët), akkor is mutassunk "nincs tal√°lat"-ot
        const visibleCols = Array.from(headers).filter(th => th.style.display !== 'none').length;
        const noResults = document.getElementById('no-results');
        const table = document.querySelector('table');

        if (visibleRows === 0 || visibleCols === 0) {
            noResults.classList.remove('hidden');
            table.classList.add('opacity-50'); // Halv√°ny√≠tjuk a t√°bl√°zatot
        } else {
            noResults.classList.add('hidden');
            table.classList.remove('opacity-50');
        }
    }
</script>
